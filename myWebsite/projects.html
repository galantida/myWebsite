<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="javascript/utils.js"></script>
    <script src="javascript/XHRRequestManager.js"></script>
    <script src="javascript/Templates.js"></script>
    <script src="javascript/Template.js"></script>
    <script src="javascript/Project.js"></script>
    <script src="javascript/Projects.js"></script>
    <link rel="stylesheet" href="styles.css">
    <script>
        const queryString = window.location.search;
        const params = new URLSearchParams(queryString);

        var templates = new Templates();
        var projects = new Projects();

        function loadPage() {
            loadTemplates();
        }

        function loadTemplates() {
            var templateList = ["templates/header.html", "templates/footer.html", "templates/projectBanner.html"];
            templates.loadTemplates(templateList, loadContent);
        }

        function loadContent() {
            // download content
            projects.loadProjectsByIndexFile("content/index.json", displayPage);
        }

        function displayPage() {
            // get content
            var projectType = params.get("type");

            // display contentless templates
            document.getElementById("header").innerHTML = templates.getTemplate("header").template;
            document.getElementById("footer").innerHTML = templates.getTemplate("footer").template;
            var template = templates.getTemplate("projectBanner");

            var html = "";
            for (var t = 0; t < projects.projects.length; t++) {
                var content = projects.projects[t].content;

                html += template.populated(content);
            }

            document.getElementById("content").innerHTML = html;

            document.body.style.visibility = "visible";
        }
    </script>
</head>
<body style="visibility:hidden;">
    <div id="header" class="padded bordered bannerRvs" style="margin-bottom:25px;"></div>

    <div id="content"></div>

    <div id="footer" class="padded" style="margin-top:25px;clear:both;"></div>
</body>
</html>
<script>
    loadPage();
</script>